version: "4"
services:
  # Launch emulator and appium instance
  android-service:
    image: android-emulator
    build: .
    ports:
      - 4726:4725
    container_name: android
    environment:
      - APPIUM_PORT=4725
    privileged: true
    command:
      - bash
      - -c
      - | 
         ./start_emu_headless.sh
    tty: true
    stdin_open: true

  # Starting VNC server
  VNC-Service:
    image: android-emulator
    build: .
    ports:
      - 5901:5900
    container_name: VNC-Service
    environment: 
      - VNC_PASSWORD=123
    privileged: true
    command:
      - bash
      - -c
      - |
         ./start_vnc.sh
    tty: true
    stdin_open: true
